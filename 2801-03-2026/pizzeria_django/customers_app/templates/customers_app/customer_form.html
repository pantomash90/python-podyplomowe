{% extends "base.html" %}

{% block title %}Dodaj klienta - Pizzeria{% endblock %}

{% block content %}
<h1>Dodaj nowego klienta</h1>

{% if errors %}
<div class="alert alert-danger">
    <ul class="mb-0">
        {% for error in errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<form method="post">
    {% csrf_token %}
    <div class="mb-3">
        <label for="name" class="form-label">Imie i nazwisko</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ name|default:'' }}" required>
    </div>
    <div class="mb-3">
        <label for="phone" class="form-label">Telefon</label>
        <input type="text" class="form-control" id="phone" name="phone" value="{{ phone|default:'' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Typ klienta</label>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="type" id="type_regular" value="regular"
                {% if customer_type != 'vip' %}checked{% endif %}
                onchange="document.getElementById('discount_group').style.display='none'">
            <label class="form-check-label" for="type_regular">Zwykly klient</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="type" id="type_vip" value="vip"
                {% if customer_type == 'vip' %}checked{% endif %}
                onchange="document.getElementById('discount_group').style.display='block'">
            <label class="form-check-label" for="type_vip">Klient VIP</label>
        </div>
    </div>
    <div class="mb-3" id="discount_group" style="{% if customer_type != 'vip' %}display:none{% endif %}">
        <label for="discount" class="form-label">Rabat VIP (%)</label>
        <input type="number" step="1" min="0" max="100" class="form-control" id="discount" name="discount" value="{{ discount|default:'10' }}">
    </div>
    <button type="submit" class="btn btn-success">Dodaj</button>
    <a href="{% url 'customer_list' %}" class="btn btn-secondary">Anuluj</a>
</form>
{% endblock %}
